<<<<<<< HEAD
\begin{figure}[!t]
\centering
    \begin{subfigure}
        \begin{Verbatim}[fontsize=\relsize{-1}]
        lock(application_lock);
        write(user.db);
        unlock(application_lock);
        \end{Verbatim}
    \end{subfigure}
    \vspace{-0.08in}
    {\footnotesize (a)}
    \vspace{-0.08in}
    \begin{subfigure}
        \begin{Verbatim}[fontsize=\relsize{-1}]
=======
\begin{lstlisting}[float=t, caption = {\textbf{Application Update Protocols. }\textit{\footnotesize The
listing shows pseudo-code for three different update protocols for sqlite. the
first protocol is vulnerable to either a process or system crash. the second
protocol is correct in the face of a process crash, but vulnerable in the event
of a system crash. the last protocol is correct in the face of both process and
system crashes.}}, label = {fig-protocols}, escapechar=!]
        lock(application_lock);
        write(user.db);
        unlock(application_lock);
		!\vspace{-0.1in}!
		!{{\normalfont{\footnotesize (a)}}\vspace{0.1in}!
>>>>>>> 76fa2bc03e749a67ec4d2c9755219a96eda9be9d
        lock(application_lock);
        write(journal);
        write(user.db);
        unlock(application_lock);
<<<<<<< HEAD
        \end{Verbatim}
    \end{subfigure}
    \vspace{-0.08in}
    {\footnotesize (b)}
    \vspace{-0.08in}
    \begin{subfigure}
        \begin{Verbatim}[fontsize=\relsize{-1}]
=======
		!\vspace{-0.1in}!
		!{{\normalfont{\footnotesize (b)}}\vspace{0.1in}!
>>>>>>> 76fa2bc03e749a67ec4d2c9755219a96eda9be9d
        lock(application_lock);
        write(journal);
        fsync(journal);
        write(user.db);
        fsync(user.db);
        unlock(application_lock);
<<<<<<< HEAD
        \end{Verbatim}
    \end{subfigure}
    \vspace{-0.08in}
    {\footnotesize (c)}
    \vspace{-0.08in}
\mycaption{fig-protocols}{Application Update Protocols}{\footnotesize The
figure shows pseudo-code for three different update protocols for SQLite. The
first protocol is vulnerable to either a process or system crash. The second
protocol is correct in the face of a process crash, but vulnerable in the event
of a system crash. The last protocol is correct in the face of both process and
system crashes.}
\vspace{-0.1in}
\end{figure}


=======
		!\vspace{-0.1in}!
		!{{\normalfont{\footnotesize (c)}}\vspace{0.1in}!
\end{lstlisting}
>>>>>>> 76fa2bc03e749a67ec4d2c9755219a96eda9be9d

