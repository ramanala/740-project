\begin{lstlisting}[float=t, caption = {\textbf{Illustrating Dependencies.}
\textit{\footnotesize The
listing shows four system calls in an update protocol. The comments indicate
the dependencies of each system call. A crash state cannot reflect the effects
of a system call without reflecting the effects of it dependencies.  
}}, label = {lst-dep-example}, escapechar=!]

!\vspace{-0.2in}!
# First write. Dependencies: None 
1 write(file, offset=0, "A") 

!\vspace{-0.2in}!
# Sync operation. 
2 fsync(file)

!\vspace{-0.2in}!
# Write to the file again. Dependencies: #1.  
3 write(file, offset=1, "B")

!\vspace{-0.2in}!
# Write to a different file. Dependencies: #1.  
4 write(file2, offset=0, "C")

\end{lstlisting}

